---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/assets/css/main.css
autonomous: true

must_haves:
  truths:
    - "Blog renders text in Inter font family (visible in DevTools computed styles)"
    - "Three distinct surface elevation colors are defined and available as Tailwind utilities (bg-dark, bg-dark-surface, bg-dark-elevated)"
    - "Prose headings render in cream, not gold — gold is reserved for links and inline code only"
    - "All prose color overrides use var(--color-*) references, not hardcoded hex values"
  artifacts:
    - path: "app/assets/css/main.css"
      provides: "Complete design token system, font loading, prose overrides"
      contains: "--color-dark-elevated"
    - path: "app/assets/css/main.css"
      provides: "Inter font loaded via Google Fonts"
      contains: "fonts.googleapis.com"
    - path: "app/assets/css/main.css"
      provides: "Font family token"
      contains: "--font-sans"
    - path: "app/assets/css/main.css"
      provides: "Prose overrides using var() references"
      contains: "var(--color-cream)"
  key_links:
    - from: "Google Fonts @import"
      to: "@theme --font-sans"
      via: "CSS @import loads Inter, --font-sans references it"
      pattern: '@import url.*Inter.*\n.*@import.*tailwindcss'
    - from: "@theme color tokens"
      to: ".prose overrides"
      via: "Prose variables reference @theme tokens"
      pattern: "--tw-prose-body: var\\(--color-cream\\)"
---

<objective>
Establish the complete design token system for the Chain Insights blog: load the Inter font family, expand the @theme block with surface elevation tiers, shadow tokens, and easing curves, then update all prose overrides to reference theme tokens via var() instead of hardcoded hex values. This plan also implements gold restraint in prose — moving headings, quotes, bullets, and counters from gold to cream/cream-muted.

Purpose: Every downstream visual change depends on stable, complete tokens. This is the foundation layer.
Output: A fully expanded main.css with Inter loading, 3 surface elevations, and tokenized prose overrides.
</objective>

<execution_context>
@/home/aph5nt/.claude/get-shit-done/workflows/execute-plan.md
@/home/aph5nt/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@app/assets/css/main.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand @theme tokens and load Inter font</name>
  <files>app/assets/css/main.css</files>
  <action>
Rewrite the top of main.css to add Inter font loading and expand the @theme block. The changes are:

1. Add Google Fonts @import for Inter (weights 400, 500, 700 with display=swap) as the FIRST line of the file, BEFORE `@import "tailwindcss"`. This ordering is critical — CSS spec requires @import rules before other rules.

2. Expand the @theme block to include:
   - Surface elevations: Keep existing --color-dark (#0A0A0F), --color-dark-surface (#12121A), --color-dark-border (#1E1E2A). ADD --color-dark-elevated (#1A1A26) for hover states and elevated elements. This creates 3 distinct surface levels.
   - Brand colors: Keep --color-gold (#C9B88C), --color-gold-dim (#A89A6E) as-is.
   - Text colors: Keep --color-cream (#E8E6E3), --color-cream-muted (#B0ADA8) as-is.
   - Font family: ADD --font-sans: "Inter", ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
   - Shadows: ADD --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.4); and --shadow-card-hover: 0 4px 12px rgba(0, 0, 0, 0.5);
   - Easing: ADD --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1); and --ease-fluid: cubic-bezier(0.3, 0, 0, 1);

Keep the body rule and scrollbar styling unchanged.
  </action>
  <verify>Run `cd /home/aph5nt/blog && npx nuxi build 2>&1 | tail -20` — build completes without CSS errors. Grep main.css for "fonts.googleapis.com" and "--font-sans" and "--color-dark-elevated" to confirm tokens present.</verify>
  <done>main.css has Inter font @import before tailwindcss import, @theme block contains all 4 surface colors, font-sans token, shadow tokens, and easing curves.</done>
</task>

<task type="auto">
  <name>Task 2: Update prose overrides to use var() references and implement gold restraint</name>
  <files>app/assets/css/main.css</files>
  <action>
Replace the entire .prose block's hardcoded hex values with var(--color-*) references. This is the gold restraint mechanism — prose headings, quotes, bullets, and counters change from gold to cream/cream-muted.

Updated .prose block:
- --tw-prose-body: var(--color-cream)
- --tw-prose-headings: var(--color-cream)  [CHANGED from gold #C9B88C to cream]
- --tw-prose-lead: var(--color-cream-muted)
- --tw-prose-links: var(--color-gold)  [stays gold — interactive element]
- --tw-prose-bold: var(--color-cream)
- --tw-prose-counters: var(--color-cream-muted)  [CHANGED from gold-dim]
- --tw-prose-bullets: var(--color-cream-muted)  [CHANGED from gold-dim]
- --tw-prose-hr: var(--color-dark-border)
- --tw-prose-quotes: var(--color-cream)  [CHANGED from gold]
- --tw-prose-quote-borders: var(--color-dark-border)  [CHANGED from gold]
- --tw-prose-captions: var(--color-cream-muted)
- --tw-prose-kbd: var(--color-cream)
- --tw-prose-kbd-shadows: 201 184 140  [KEEP as raw RGB triplet — this variable expects RGB, not a var() reference. See research pitfall #4]
- --tw-prose-code: var(--color-gold)  [stays gold — semantic highlight]
- --tw-prose-pre-code: var(--color-cream)
- --tw-prose-pre-bg: var(--color-dark-surface)
- --tw-prose-th-borders: var(--color-dark-border)
- --tw-prose-td-borders: var(--color-dark-border)

Also update the .prose a hover color from hardcoded hex to var():
- .prose a { text-decoration-color: var(--color-gold-dim); }
- .prose a:hover { color: var(--color-cream); }

Also update scrollbar styling to use var() references:
- scrollbar-track: var(--color-dark)
- scrollbar-thumb: var(--color-dark-border)
- scrollbar-thumb:hover: var(--color-gold)
  </action>
  <verify>Run `cd /home/aph5nt/blog && npx nuxi build 2>&1 | tail -20` — build succeeds. Grep main.css to confirm no hardcoded hex values remain in .prose block (exception: --tw-prose-kbd-shadows which must stay as RGB triplet). Count occurrences of "var(--color-" in .prose block — should be 16+.</verify>
  <done>All prose overrides reference @theme tokens via var(). Prose headings are cream (not gold). Prose quotes and bullets are cream-muted (not gold-dim). Only links and inline code remain gold. No hardcoded hex values remain except --tw-prose-kbd-shadows RGB triplet.</done>
</task>

</tasks>

<verification>
1. `cd /home/aph5nt/blog && npx nuxi build` completes without errors
2. main.css contains `@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap")` as the first line
3. @theme block defines: --color-dark, --color-dark-surface, --color-dark-elevated, --color-dark-border (4 surface levels)
4. @theme block defines: --font-sans with "Inter" as primary
5. @theme block defines: --shadow-card, --shadow-card-hover, --ease-smooth, --ease-fluid
6. .prose block uses var(--color-*) for all values except --tw-prose-kbd-shadows
7. .prose --tw-prose-headings references cream, NOT gold
8. No hardcoded hex values in .prose, .prose a, .prose a:hover, or scrollbar rules (except kbd-shadows)
</verification>

<success_criteria>
- Inter font loads via Google Fonts CDN with display=swap
- Three distinct surface elevation colors defined: dark (#0A0A0F), dark-surface (#12121A), dark-elevated (#1A1A26)
- Font, shadow, and easing tokens defined in @theme
- All prose overrides use var() references (single source of truth)
- Gold restraint applied: prose headings are cream, not gold
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
